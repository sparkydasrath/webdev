{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/ts/Ops.ts","src/ts/StringUtility.ts","src/ts/app.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { IOps } from \"./interfaces/IOps\";\r\n\r\nclass Ops implements IOps {\r\n    add(x: number, y: number): number {\r\n        return x + y;\r\n    }\r\n    subtract(x: number, y: number): number {\r\n        return x - y;\r\n    }\r\n    multiply(x: number, y: number): number {\r\n        return x * y;\r\n    }\r\n    divide(x: number, y: number): number {\r\n        if (y === 0) return 0;\r\n        return x / y;\r\n    }\r\n    plusMinus(x: number): number {\r\n        return (-1) * x;\r\n    }\r\n}\r\n\r\nexport default Ops;","export class StringUtility {\r\n    public static replaceAt(oringalString: string, replacementString: string, position: number): string {\r\n        let origAsArray = oringalString.split(\"\");\r\n        origAsArray[position] = replacementString;\r\n        let finalString = origAsArray.join(\"\");\r\n        return finalString;\r\n    }\r\n}\r\n","import Ops from \"./Ops\";\r\nimport { StringUtility } from \"./StringUtility\";\r\n\r\nenum OperatorType {\r\n    None = \"\",\r\n    Add = \"Add\",\r\n    Subtract = \"Subtract\",\r\n    Multiply = \"Multiply\",\r\n    Divide = \"Divide\",\r\n    PlusMinus = \"PlusMinus\",\r\n    Equal = \"Equal\"\r\n}\r\n\r\nclass Dom {\r\n    buttonContainer: HTMLElement | null | undefined;\r\n    addButton: HTMLButtonElement | null | undefined;\r\n    subtractButton: HTMLButtonElement | null | undefined;\r\n    multiplyButton: HTMLButtonElement | null | undefined;\r\n    divideButton: HTMLButtonElement | null | undefined;\r\n    negateButton: HTMLButtonElement | null | undefined;\r\n    equalButton: HTMLButtonElement | null | undefined;\r\n    resultDisplay: HTMLElement | null | undefined;\r\n    summaryDisplay: HTMLElement | null | undefined;\r\n}\r\n\r\nclass MainView {\r\n\r\n    clickEvent: string = \"click\";\r\n    buttonContainerClassName: string = \".btn-container\";\r\n    resultDisplayClassName: string = \".result-display\";\r\n    summaryDisplayClassName: string = \".summary-display\";\r\n\r\n    leftAsString: string = \"\";\r\n    left: number = 0;\r\n    right: number = 0;\r\n    rightAsString: string = \"\";\r\n    total: number = 0;\r\n    opType: OperatorType = OperatorType.None;\r\n    opTypeHtml: string = \"\";\r\n    useLeftForSummary: boolean = true;\r\n    opPressedCount: number = 0;\r\n\r\n    private dom: Dom = new Dom();\r\n    private ops: Ops = new Ops();\r\n\r\n    private cacheDom(): void {\r\n        this.dom.buttonContainer = <HTMLElement>document.querySelector(this.buttonContainerClassName);\r\n        this.dom.summaryDisplay = <HTMLElement>document.querySelector(this.summaryDisplayClassName);\r\n        this.dom.resultDisplay = <HTMLElement>document.querySelector(this.resultDisplayClassName);\r\n    }\r\n\r\n    public bindEvents() {\r\n        if (this.dom.buttonContainer !== null && this.dom.buttonContainer !== undefined) {\r\n            this.dom.buttonContainer.addEventListener(this.clickEvent, this.handleBtnContainerClick);\r\n        }\r\n    }\r\n\r\n    public handleBtnContainerClick = (event: Event): void => {\r\n        // had to do the event handler this way in order to pass along the correct 'this'\r\n        //  context to it\r\n        // see: https://stackoverflow.com/questions/18423410/typescript-retain-scope-in-event-listener\r\n        let srcButton = <HTMLButtonElement>event.srcElement;\r\n        if (srcButton === null || srcButton === undefined) {\r\n            console.error(\"Can't find the button that was clicked\");\r\n            return;\r\n        }\r\n\r\n        let srcButtonValue = srcButton.innerHTML;\r\n        if (srcButtonValue >= \"0\" && srcButtonValue <= \"9\")\r\n            this.handleNumberButtonPressed(srcButtonValue);\r\n        else {\r\n            // get the data that knows what operator button was pressed \r\n            this.opTypeHtml = srcButtonValue;\r\n            this.handleOperatorButtonPressed(srcButton.getAttribute(\"data-opType\"), srcButtonValue);\r\n        };\r\n    }\r\n\r\n    private handleOperatorButtonPressed(opPressed: string | null, htmlContentOfOp: string): void {\r\n\r\n        this.opPressedCount++;\r\n\r\n        if (opPressed === null) {\r\n            console.error(\"Operation selected is null\");\r\n            return;\r\n        }\r\n        else if (opPressed === OperatorType.Equal) {\r\n            this.computeTotal();\r\n            this.updateViewPipeline(true, htmlContentOfOp);\r\n            return;\r\n        }\r\n\r\n        else if (this.opType === OperatorType.None) {\r\n            this.opType = <OperatorType>opPressed;\r\n            this.updateSummaryDisplay(htmlContentOfOp);\r\n            return;\r\n        }\r\n\r\n        else {\r\n\r\n            this.computeTotal();\r\n            this.opType = <OperatorType>opPressed;\r\n            this.updateViewPipeline(false, htmlContentOfOp);\r\n            return;\r\n        }\r\n    }\r\n\r\n    private updateViewPipeline(canClearSummaryDisplay: boolean, htmlContentOfOp: string) {\r\n        if (canClearSummaryDisplay) {\r\n            this.clearSummaryDisplay();\r\n        }\r\n        else {\r\n            this.updateSummaryDisplay(htmlContentOfOp);\r\n        }\r\n\r\n        this.updateLeftAndRightValues();\r\n        this.displayResult();\r\n    }\r\n\r\n\r\n    private computeTotal(): void {\r\n\r\n        this.left = Number(this.leftAsString);\r\n        this.right = Number(this.rightAsString);\r\n\r\n        switch (this.opType) {\r\n            case (OperatorType.None): {\r\n                break;\r\n            }\r\n            case (OperatorType.Add): {\r\n                this.total = this.ops.add(this.left, this.right);\r\n                break;\r\n            }\r\n            case (OperatorType.Subtract): {\r\n                this.total = this.ops.subtract(this.left, this.right);\r\n                break;\r\n            }\r\n            case (OperatorType.Multiply): {\r\n                this.total = this.ops.multiply(this.left, this.right);\r\n                break;\r\n            }\r\n            case (OperatorType.Divide): {\r\n                this.total = this.ops.divide(this.left, this.right);\r\n                break;\r\n            }\r\n            case (OperatorType.PlusMinus): {\r\n                //  need to display negative number\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                console.log(`Operator ${this.opType} is not defined`);\r\n                break;\r\n            }\r\n        }\r\n        // this.updateLeftAndRightValues();\r\n        // this.displayResult();\r\n    }\r\n\r\n    private displayResult(): void {\r\n        if (this.dom.resultDisplay !== null && this.dom.resultDisplay !== undefined) {\r\n            this.dom.resultDisplay.textContent = `${this.total}`;\r\n        }\r\n    }\r\n\r\n    private displayLeft(): void {\r\n        if (this.dom.resultDisplay !== null && this.dom.resultDisplay !== undefined) {\r\n            this.dom.resultDisplay.textContent = this.leftAsString;\r\n        }\r\n    }\r\n\r\n    private displayRight(): void {\r\n        if (this.dom.resultDisplay !== null && this.dom.resultDisplay !== undefined) {\r\n            this.dom.resultDisplay.textContent = this.rightAsString;\r\n        }\r\n    }\r\n    private clearSummaryDisplay(): void {\r\n        if (this.dom.summaryDisplay !== null && this.dom.summaryDisplay !== undefined) {\r\n            this.dom.summaryDisplay.innerHTML = \"\";\r\n            this.useLeftForSummary = true;\r\n        };\r\n    }\r\n\r\n    private updateSummaryDisplay(opPressedHtml: string): void {\r\n        if (this.dom.summaryDisplay === null || this.dom.summaryDisplay === undefined) {\r\n            console.error(\"Unable to populate summary value\");\r\n            return;\r\n        }\r\n\r\n        if (this.opPressedCount > 1) {\r\n            this.partialSummaryDisplayUpdate(opPressedHtml);\r\n            return;\r\n        }\r\n\r\n        if (this.useLeftForSummary) {\r\n            this.fullLeftSummaryDisplayUpdate();\r\n            this.useLeftForSummary = false;\r\n        }\r\n        else {\r\n            // this.dom.summaryDisplay.innerHTML += this.rightAsString + \" \" + this.opTypeHtml + \" \";\r\n            this.fullRightSummaryDisplayUpdate();\r\n        }\r\n    }\r\n\r\n    private fullLeftSummaryDisplayUpdate(): void {\r\n        if (this.dom.summaryDisplay === null || this.dom.summaryDisplay === undefined) {\r\n            console.error(\"fullSummaryDisplayUpdate(): Unable to do a full summary display update\");\r\n            return;\r\n        }\r\n        this.dom.summaryDisplay.innerHTML += this.leftAsString + \" \" + this.opTypeHtml + \" \";\r\n    }\r\n\r\n    private fullRightSummaryDisplayUpdate(): void {\r\n        if (this.dom.summaryDisplay === null || this.dom.summaryDisplay === undefined) {\r\n            console.error(\"fullSummaryDisplayUpdate(): Unable to do a full summary display update\");\r\n            return;\r\n        }\r\n        this.dom.summaryDisplay.innerHTML += this.rightAsString + \" \" + this.opTypeHtml + \" \";\r\n    }\r\n\r\n    private partialSummaryDisplayUpdate(opPressedHtml: string): void {\r\n        if (this.dom.summaryDisplay === null || this.dom.summaryDisplay === undefined) {\r\n            console.error(\"partialSummaryDisplayUpdate(): Unable to do a partial summary display update\");\r\n            return;\r\n        }\r\n        let replaced = this.replaceLastDisplayedOperatorWithCurrentOne(this.dom.summaryDisplay.innerHTML, opPressedHtml);\r\n        this.dom.summaryDisplay.innerHTML = replaced;\r\n    }\r\n\r\n    private replaceLastDisplayedOperatorWithCurrentOne(valueToModify: string, replacementValue: string): string {\r\n\r\n        let currentDisplay = StringUtility.replaceAt(valueToModify, replacementValue, valueToModify.length - 2);\r\n        return currentDisplay;\r\n    }\r\n\r\n    private updateLeftAndRightValues() {\r\n        this.leftAsString = this.total.toString();\r\n        this.left = this.total;\r\n        this.rightAsString = \"\";\r\n        this.right = 0;\r\n    }\r\n\r\n    private handleNumberButtonPressed(pressedNumber: string): void {\r\n\r\n        this.opPressedCount = 0;\r\n\r\n        if (this.leftAsString === \"\" || this.opType === OperatorType.None) {\r\n            this.leftAsString += pressedNumber;\r\n            this.displayLeft();\r\n        }\r\n        else {\r\n            this.rightAsString += pressedNumber;\r\n            this.displayRight();\r\n        }\r\n    }\r\n\r\n    public init() {\r\n        this.cacheDom();\r\n        this.bindEvents();\r\n    }\r\n}\r\n\r\n(function () {\r\n    let main = new MainView();\r\n    main.init()\r\n}());"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvT3BzLnRzIiwic3JjL3RzL1N0cmluZ1V0aWxpdHkudHMiLCJzcmMvdHMvYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNFQTtJQUNJLEdBQUcsQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQztJQUNELFFBQVEsQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUN6QixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQztJQUNELFFBQVEsQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUN6QixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQztJQUNELE1BQU0sQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUN2QixJQUFJLENBQUMsS0FBSyxDQUFDO1lBQUUsT0FBTyxDQUFDLENBQUM7UUFDdEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pCLENBQUM7SUFDRCxTQUFTLENBQUMsQ0FBUztRQUNmLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwQixDQUFDO0NBQ0o7QUFFRCxrQkFBZSxHQUFHLENBQUM7Ozs7QUNyQm5CO0lBQ1csTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFxQixFQUFFLGlCQUF5QixFQUFFLFFBQWdCO1FBQ3RGLElBQUksV0FBVyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDMUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLGlCQUFpQixDQUFDO1FBQzFDLElBQUksV0FBVyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDdkMsT0FBTyxXQUFXLENBQUM7SUFDdkIsQ0FBQztDQUNKO0FBUEQsc0NBT0M7Ozs7Ozs7QUNQRCxnREFBd0I7QUFDeEIsbURBQWdEO0FBRWhELElB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QWEsSUFBSSxhQUFhLENBQUM7WUFDcEMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3ZCO0lBQ0wsQ0FBQztJQUVNLElBQUk7UUFDUCxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3RCLENBQUM7Q0FDSjtBQUVELENBQUM7SUFDRyxJQUFJLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO0lBQzFCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQTtBQUNmLENBQUMsRUFBRSxDQUFDLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBJT3BzIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9JT3BzXCI7XHJcblxyXG5jbGFzcyBPcHMgaW1wbGVtZW50cyBJT3BzIHtcclxuICAgIGFkZCh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHggKyB5O1xyXG4gICAgfVxyXG4gICAgc3VidHJhY3QoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB4IC0geTtcclxuICAgIH1cclxuICAgIG11bHRpcGx5KHg6IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4geCAqIHk7XHJcbiAgICB9XHJcbiAgICBkaXZpZGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh5ID09PSAwKSByZXR1cm4gMDtcclxuICAgICAgICByZXR1cm4geCAvIHk7XHJcbiAgICB9XHJcbiAgICBwbHVzTWludXMoeDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKC0xKSAqIHg7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE9wczsiLCJleHBvcnQgY2xhc3MgU3RyaW5nVXRpbGl0eSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlcGxhY2VBdChvcmluZ2FsU3RyaW5nOiBzdHJpbmcsIHJlcGxhY2VtZW50U3RyaW5nOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBvcmlnQXNBcnJheSA9IG9yaW5nYWxTdHJpbmcuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgb3JpZ0FzQXJyYXlbcG9zaXRpb25dID0gcmVwbGFjZW1lbnRTdHJpbmc7XHJcbiAgICAgICAgbGV0IGZpbmFsU3RyaW5nID0gb3JpZ0FzQXJyYXkuam9pbihcIlwiKTtcclxuICAgICAgICByZXR1cm4gZmluYWxTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IE9wcyBmcm9tIFwiLi9PcHNcIjtcclxuaW1wb3J0IHsgU3RyaW5nVXRpbGl0eSB9IGZyb20gXCIuL1N0cmluZ1V0aWxpdHlcIjtcclxuXHJcbmVudW0gT3BlcmF0b3JUeXBlIHtcclxuICAgIE5vbmUgPSBcIlwiLFxyXG4gICAgQWRkID0gXCJBZGRcIixcclxuICAgIFN1YnRyYWN0ID0gXCJTdWJ0cmFjdFwiLFxyXG4gICAgTXVsdGlwbHkgPSBcIk11bHRpcGx5XCIsXHJcbiAgICBEaXZpZGUgPSBcIkRpdmlkZVwiLFxyXG4gICAgUGx1c01pbnVzID0gXCJQbHVzTWludXNcIixcclxuICAgIEVxdWFsID0gXCJFcXVhbFwiXHJcbn1cclxuXHJcbmNsYXNzIERvbSB7XHJcbiAgICBidXR0b25Db250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIGFkZEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgc3VidHJhY3RCdXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIG11bHRpcGx5QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbiAgICBkaXZpZGVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIG5lZ2F0ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCBudWxsIHwgdW5kZWZpbmVkO1xyXG4gICAgZXF1YWxCdXR0b246IEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHJlc3VsdERpc3BsYXk6IEhUTUxFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuICAgIHN1bW1hcnlEaXNwbGF5OiBIVE1MRWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmNsYXNzIE1haW5WaWV3IHtcclxuXHJcbiAgICBjbGlja0V2ZW50OiBzdHJpbmcgPSBcImNsaWNrXCI7XHJcbiAgICBidXR0b25Db250YWluZXJDbGFzc05hbWU6IHN0cmluZyA9IFwiLmJ0bi1jb250YWluZXJcIjtcclxuICAgIHJlc3VsdERpc3BsYXlDbGFzc05hbWU6IHN0cmluZyA9IFwiLnJlc3VsdC1kaXNwbGF5XCI7XHJcbiAgICBzdW1tYXJ5RGlzcGxheUNsYXNzTmFtZTogc3RyaW5nID0gXCIuc3VtbWFyeS1kaXNwbGF5XCI7XHJcblxyXG4gICAgbGVmdEFzU3RyaW5nOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgbGVmdDogbnVtYmVyID0gMDtcclxuICAgIHJpZ2h0OiBudW1iZXIgPSAwO1xyXG4gICAgcmlnaHRBc1N0cmluZzogc3RyaW5nID0gXCJcIjtcclxuICAgIHRvdGFsOiBudW1iZXIgPSAwO1xyXG4gICAgb3BUeXBlOiBPcGVyYXRvclR5cGUgPSBPcGVyYXRvclR5cGUuTm9uZTtcclxuICAgIG9wVHlwZUh0bWw6IHN0cmluZyA9IFwiXCI7XHJcbiAgICB1c2VMZWZ0Rm9yU3VtbWFyeTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBvcFByZXNzZWRDb3VudDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcml2YXRlIGRvbTogRG9tID0gbmV3IERvbSgpO1xyXG4gICAgcHJpdmF0ZSBvcHM6IE9wcyA9IG5ldyBPcHMoKTtcclxuXHJcbiAgICBwcml2YXRlIGNhY2hlRG9tKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZG9tLmJ1dHRvbkNvbnRhaW5lciA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuYnV0dG9uQ29udGFpbmVyQ2xhc3NOYW1lKTtcclxuICAgICAgICB0aGlzLmRvbS5zdW1tYXJ5RGlzcGxheSA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc3VtbWFyeURpc3BsYXlDbGFzc05hbWUpO1xyXG4gICAgICAgIHRoaXMuZG9tLnJlc3VsdERpc3BsYXkgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnJlc3VsdERpc3BsYXlDbGFzc05hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRvbS5idXR0b25Db250YWluZXIgIT09IG51bGwgJiYgdGhpcy5kb20uYnV0dG9uQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kb20uYnV0dG9uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5jbGlja0V2ZW50LCB0aGlzLmhhbmRsZUJ0bkNvbnRhaW5lckNsaWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUJ0bkNvbnRhaW5lckNsaWNrID0gKGV2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIGhhZCB0byBkbyB0aGUgZXZlbnQgaGFuZGxlciB0aGlzIHdheSBpbiBvcmRlciB0byBwYXNzIGFsb25nIHRoZSBjb3JyZWN0ICd0aGlzJ1xyXG4gICAgICAgIC8vICBjb250ZXh0IHRvIGl0XHJcbiAgICAgICAgLy8gc2VlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xODQyMzQxMC90eXBlc2NyaXB0LXJldGFpbi1zY29wZS1pbi1ldmVudC1saXN0ZW5lclxyXG4gICAgICAgIGxldCBzcmNCdXR0b24gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZXZlbnQuc3JjRWxlbWVudDtcclxuICAgICAgICBpZiAoc3JjQnV0dG9uID09PSBudWxsIHx8IHNyY0J1dHRvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW4ndCBmaW5kIHRoZSBidXR0b24gdGhhdCB3YXMgY2xpY2tlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNyY0J1dHRvblZhbHVlID0gc3JjQnV0dG9uLmlubmVySFRNTDtcclxuICAgICAgICBpZiAoc3JjQnV0dG9uVmFsdWUgPj0gXCIwXCIgJiYgc3JjQnV0dG9uVmFsdWUgPD0gXCI5XCIpXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTnVtYmVyQnV0dG9uUHJlc3NlZChzcmNCdXR0b25WYWx1ZSk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGdldCB0aGUgZGF0YSB0aGF0IGtub3dzIHdoYXQgb3BlcmF0b3IgYnV0dG9uIHdhcyBwcmVzc2VkIFxyXG4gICAgICAgICAgICB0aGlzLm9wVHlwZUh0bWwgPSBzcmNCdXR0b25WYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVPcGVyYXRvckJ1dHRvblByZXNzZWQoc3JjQnV0dG9uLmdldEF0dHJpYnV0ZShcImRhdGEtb3BUeXBlXCIpLCBzcmNCdXR0b25WYWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZU9wZXJhdG9yQnV0dG9uUHJlc3NlZChvcFByZXNzZWQ6IHN0cmluZyB8IG51bGwsIGh0bWxDb250ZW50T2ZPcDogc3RyaW5nKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMub3BQcmVzc2VkQ291bnQrKztcclxuXHJcbiAgICAgICAgaWYgKG9wUHJlc3NlZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3BlcmF0aW9uIHNlbGVjdGVkIGlzIG51bGxcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3BQcmVzc2VkID09PSBPcGVyYXRvclR5cGUuRXF1YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wdXRlVG90YWwoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3UGlwZWxpbmUodHJ1ZSwgaHRtbENvbnRlbnRPZk9wKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcFR5cGUgPT09IE9wZXJhdG9yVHlwZS5Ob25lKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3BUeXBlID0gPE9wZXJhdG9yVHlwZT5vcFByZXNzZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3VtbWFyeURpc3BsYXkoaHRtbENvbnRlbnRPZk9wKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVUb3RhbCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9wVHlwZSA9IDxPcGVyYXRvclR5cGU+b3BQcmVzc2VkO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdQaXBlbGluZShmYWxzZSwgaHRtbENvbnRlbnRPZk9wKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVZpZXdQaXBlbGluZShjYW5DbGVhclN1bW1hcnlEaXNwbGF5OiBib29sZWFuLCBodG1sQ29udGVudE9mT3A6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChjYW5DbGVhclN1bW1hcnlEaXNwbGF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTdW1tYXJ5RGlzcGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTdW1tYXJ5RGlzcGxheShodG1sQ29udGVudE9mT3ApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVMZWZ0QW5kUmlnaHRWYWx1ZXMoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlSZXN1bHQoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlVG90YWwoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMubGVmdCA9IE51bWJlcih0aGlzLmxlZnRBc1N0cmluZyk7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IE51bWJlcih0aGlzLnJpZ2h0QXNTdHJpbmcpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMub3BUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgKE9wZXJhdG9yVHlwZS5Ob25lKToge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAoT3BlcmF0b3JUeXBlLkFkZCk6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSB0aGlzLm9wcy5hZGQodGhpcy5sZWZ0LCB0aGlzLnJpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgKE9wZXJhdG9yVHlwZS5TdWJ0cmFjdCk6IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSB0aGlzLm9wcy5zdWJ0cmFjdCh0aGlzLmxlZnQsIHRoaXMucmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAoT3BlcmF0b3JUeXBlLk11bHRpcGx5KToge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRoaXMub3BzLm11bHRpcGx5KHRoaXMubGVmdCwgdGhpcy5yaWdodCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIChPcGVyYXRvclR5cGUuRGl2aWRlKToge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRoaXMub3BzLmRpdmlkZSh0aGlzLmxlZnQsIHRoaXMucmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAoT3BlcmF0b3JUeXBlLlBsdXNNaW51cyk6IHtcclxuICAgICAgICAgICAgICAgIC8vICBuZWVkIHRvIGRpc3BsYXkgbmVnYXRpdmUgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYE9wZXJhdG9yICR7dGhpcy5vcFR5cGV9IGlzIG5vdCBkZWZpbmVkYCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB0aGlzLnVwZGF0ZUxlZnRBbmRSaWdodFZhbHVlcygpO1xyXG4gICAgICAgIC8vIHRoaXMuZGlzcGxheVJlc3VsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGlzcGxheVJlc3VsdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kb20ucmVzdWx0RGlzcGxheSAhPT0gbnVsbCAmJiB0aGlzLmRvbS5yZXN1bHREaXNwbGF5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kb20ucmVzdWx0RGlzcGxheS50ZXh0Q29udGVudCA9IGAke3RoaXMudG90YWx9YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkaXNwbGF5TGVmdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kb20ucmVzdWx0RGlzcGxheSAhPT0gbnVsbCAmJiB0aGlzLmRvbS5yZXN1bHREaXNwbGF5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kb20ucmVzdWx0RGlzcGxheS50ZXh0Q29udGVudCA9IHRoaXMubGVmdEFzU3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRpc3BsYXlSaWdodCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kb20ucmVzdWx0RGlzcGxheSAhPT0gbnVsbCAmJiB0aGlzLmRvbS5yZXN1bHREaXNwbGF5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kb20ucmVzdWx0RGlzcGxheS50ZXh0Q29udGVudCA9IHRoaXMucmlnaHRBc1N0cmluZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNsZWFyU3VtbWFyeURpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9tLnN1bW1hcnlEaXNwbGF5ICE9PSBudWxsICYmIHRoaXMuZG9tLnN1bW1hcnlEaXNwbGF5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5kb20uc3VtbWFyeURpc3BsYXkuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy51c2VMZWZ0Rm9yU3VtbWFyeSA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVN1bW1hcnlEaXNwbGF5KG9wUHJlc3NlZEh0bWw6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRvbS5zdW1tYXJ5RGlzcGxheSA9PT0gbnVsbCB8fCB0aGlzLmRvbS5zdW1tYXJ5RGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gcG9wdWxhdGUgc3VtbWFyeSB2YWx1ZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3BQcmVzc2VkQ291bnQgPiAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFydGlhbFN1bW1hcnlEaXNwbGF5VXBkYXRlKG9wUHJlc3NlZEh0bWwpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VMZWZ0Rm9yU3VtbWFyeSkge1xyXG4gICAgICAgICAgICB0aGlzLmZ1bGxMZWZ0U3VtbWFyeURpc3BsYXlVcGRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy51c2VMZWZ0Rm9yU3VtbWFyeSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdGhpcy5kb20uc3VtbWFyeURpc3BsYXkuaW5uZXJIVE1MICs9IHRoaXMucmlnaHRBc1N0cmluZyArIFwiIFwiICsgdGhpcy5vcFR5cGVIdG1sICsgXCIgXCI7XHJcbiAgICAgICAgICAgIHRoaXMuZnVsbFJpZ2h0U3VtbWFyeURpc3BsYXlVcGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmdWxsTGVmdFN1bW1hcnlEaXNwbGF5VXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRvbS5zdW1tYXJ5RGlzcGxheSA9PT0gbnVsbCB8fCB0aGlzLmRvbS5zdW1tYXJ5RGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJmdWxsU3VtbWFyeURpc3BsYXlVcGRhdGUoKTogVW5hYmxlIHRvIGRvIGEgZnVsbCBzdW1tYXJ5IGRpc3BsYXkgdXBkYXRlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZG9tLnN1bW1hcnlEaXNwbGF5LmlubmVySFRNTCArPSB0aGlzLmxlZnRBc1N0cmluZyArIFwiIFwiICsgdGhpcy5vcFR5cGVIdG1sICsgXCIgXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmdWxsUmlnaHRTdW1tYXJ5RGlzcGxheVVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kb20uc3VtbWFyeURpc3BsYXkgPT09IG51bGwgfHwgdGhpcy5kb20uc3VtbWFyeURpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZnVsbFN1bW1hcnlEaXNwbGF5VXBkYXRlKCk6IFVuYWJsZSB0byBkbyBhIGZ1bGwgc3VtbWFyeSBkaXNwbGF5IHVwZGF0ZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRvbS5zdW1tYXJ5RGlzcGxheS5pbm5lckhUTUwgKz0gdGhpcy5yaWdodEFzU3RyaW5nICsgXCIgXCIgKyB0aGlzLm9wVHlwZUh0bWwgKyBcIiBcIjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnRpYWxTdW1tYXJ5RGlzcGxheVVwZGF0ZShvcFByZXNzZWRIdG1sOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kb20uc3VtbWFyeURpc3BsYXkgPT09IG51bGwgfHwgdGhpcy5kb20uc3VtbWFyeURpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwicGFydGlhbFN1bW1hcnlEaXNwbGF5VXBkYXRlKCk6IFVuYWJsZSB0byBkbyBhIHBhcnRpYWwgc3VtbWFyeSBkaXNwbGF5IHVwZGF0ZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVwbGFjZWQgPSB0aGlzLnJlcGxhY2VMYXN0RGlzcGxheWVkT3BlcmF0b3JXaXRoQ3VycmVudE9uZSh0aGlzLmRvbS5zdW1tYXJ5RGlzcGxheS5pbm5lckhUTUwsIG9wUHJlc3NlZEh0bWwpO1xyXG4gICAgICAgIHRoaXMuZG9tLnN1bW1hcnlEaXNwbGF5LmlubmVySFRNTCA9IHJlcGxhY2VkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVwbGFjZUxhc3REaXNwbGF5ZWRPcGVyYXRvcldpdGhDdXJyZW50T25lKHZhbHVlVG9Nb2RpZnk6IHN0cmluZywgcmVwbGFjZW1lbnRWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnREaXNwbGF5ID0gU3RyaW5nVXRpbGl0eS5yZXBsYWNlQXQodmFsdWVUb01vZGlmeSwgcmVwbGFjZW1lbnRWYWx1ZSwgdmFsdWVUb01vZGlmeS5sZW5ndGggLSAyKTtcclxuICAgICAgICByZXR1cm4gY3VycmVudERpc3BsYXk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVMZWZ0QW5kUmlnaHRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5sZWZ0QXNTdHJpbmcgPSB0aGlzLnRvdGFsLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5sZWZ0ID0gdGhpcy50b3RhbDtcclxuICAgICAgICB0aGlzLnJpZ2h0QXNTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlTnVtYmVyQnV0dG9uUHJlc3NlZChwcmVzc2VkTnVtYmVyOiBzdHJpbmcpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5vcFByZXNzZWRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxlZnRBc1N0cmluZyA9PT0gXCJcIiB8fCB0aGlzLm9wVHlwZSA9PT0gT3BlcmF0b3JUeXBlLk5vbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0QXNTdHJpbmcgKz0gcHJlc3NlZE51bWJlcjtcclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5TGVmdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yaWdodEFzU3RyaW5nICs9IHByZXNzZWROdW1iZXI7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVJpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0KCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVEb20oKTtcclxuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgIH1cclxufVxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBtYWluID0gbmV3IE1haW5WaWV3KCk7XHJcbiAgICBtYWluLmluaXQoKVxyXG59KCkpOyJdfQ=="}